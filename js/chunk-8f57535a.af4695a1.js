(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f57535a"],{"132b":function(e,a,t){"use strict";t("4deb")},"4deb":function(e,a,t){},"9a9e":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return e.loading?t("Loader"):t("div",[t("LangEdit",{attrs:{linkRu:"cinemaEditRu",linkUa:"cinemaEditUa"}}),t("form",{attrs:{id:"cinemaEdit",action:""}},["ru"===this.$attrs.lang?t("setName",{attrs:{objName:this.cinema.name,name:"Название кинотеатра"},on:{"push-data":e.pushName}}):t("setName",{key:1,attrs:{objName:this.cinema.nameUa,name:"Назва кінотеатру"},on:{"push-data":e.pushNameUa}}),"ru"===this.$attrs.lang?t("setDescription",{attrs:{objDescription:this.cinema.description,description:"Описание"},on:{"push-data":e.pushDescription}}):t("setDescription",{key:2,attrs:{objDescription:this.cinema.descriptionUa,description:"Опис"},on:{"push-data":e.pushDescriptionUa}}),"ru"===this.$attrs.lang?t("setDescription",{attrs:{objDescription:this.cinema.circs,description:"Условия"},on:{"push-data":e.pushCircs}}):t("setDescription",{key:3,attrs:{objDescription:this.cinema.circsUa,description:"Умови"},on:{"push-data":e.pushCircsUa}}),t("setMainImg",{attrs:{objMainImgText:"Логотип",objMainImg:this.cinema.imgLogoSRC,id:"logo"},on:{"remove-main-obj-img":e.removeCinemaLogoImg,"push-main-obj-img":e.pushCinemaLogoImg}}),"ru"===this.$attrs.lang?t("setMainImg",{attrs:{objMainImgText:"Фото верхнего баннера",objMainImg:this.cinema.imgBannerSRC,id:"banner"},on:{"remove-main-obj-img":e.removeCinemaBannerImg,"push-main-obj-img":e.pushCinemaBannerImg}}):t("setMainImg",{attrs:{objMainImgText:"Фото верхнього банера",objMainImg:this.cinema.imgBannerSRC,id:"banner"},on:{"remove-main-obj-img":e.removeCinemaBannerImg,"push-main-obj-img":e.pushCinemaBannerImg}}),t("setImgGallery",{attrs:{objId:+this.$attrs.id,objImgGallery:this.cinema.gallery},on:{"push-img-gallery":e.pushGalleryCinemaImg,"remove-img-gallery":e.removeGalleryImg,"add-img-gallery":e.addImgCinemaGallery}}),t("div",{staticClass:"card-body table-responsive"},[t("table",{staticClass:"table table-hover text-nowrap"},[t("thead",[t("tr",[t("th",[e._v("Название")]),t("th",[e._v("Дата создания")])])]),t("tbody",e._l(this.cinema.halls,(function(a){return t("hallTable",{key:a.id,attrs:{hall:a,cinema:e.cinema,lang:e.$attrs.lang},on:{showModal:e.showModalDelete}})})),1)])]),t("div",{staticClass:"add-buttons"},[t("router-link",{staticClass:"btn-success",attrs:{tag:"button",to:{name:"hallEditRu",params:{id:+this.$attrs.id,idHall:(new Date).getTime(),cinema:this.cinema,lang:"ru"}}}},[e._v(" Добавить зал ")])],1),"ru"===this.$attrs.lang?t("setSEO",{attrs:{objSEOURL:this.cinema.seo.seoURL,objSEOTitle:this.cinema.seo.seoTitle,objSEOWords:this.cinema.seo.seoWords,objSEODescription:this.cinema.seo.seoDescription},on:{"push-data":e.pushSEO}}):t("setSEO",{key:4,attrs:{objSEOURL:this.cinema.seoUa.seoURL,objSEOTitle:this.cinema.seoUa.seoTitle,objSEOWords:this.cinema.seoUa.seoWords,objSEODescription:this.cinema.seoUa.seoDescription},on:{"push-data":e.pushSEOUa}}),t("div",{staticClass:"edit-buttons"},[t("button",{staticClass:"btn-success banner-up__btn",attrs:{type:"submit",form:"cinemaEdit",disabled:e.disabled},on:{click:function(a){return a.preventDefault(),e.sendCinemaData.apply(null,arguments)}}},[e._v(" Сохранить ")]),t("router-link",{staticClass:"btn-primary",attrs:{tag:"button",to:{name:"cinemas"}}},[e._v(" Вернуться ")])],1)],1),e.showModal?t("modal",{attrs:{obj:this.hallDelete},on:{close:function(a){e.showModal=!1},delete:e.deleteHall}},[t("h3",{attrs:{slot:"header"},slot:"header"},[e._v("Удаление "+e._s(this.hallDelete.name))]),t("p",{attrs:{slot:"body"},slot:"body"},[e._v(" Вы уверены что хотите удалить зал "+e._s(this.hallDelete.name)+"? ")])]):e._e(),t("Toast",{attrs:{sending:this.sending,text:"Кинотеатр успешно сохранен"}}),t("Toast",{attrs:{sending:this.deleting,text:"Зал успешно удален"}})],1)},n=[],s=t("1da1"),l=t("5530"),o=(t("96cf"),t("b0c0"),t("a4d3"),t("e01a"),t("c740"),t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("a434"),t("4de4"),t("0f79")),r=t("8628"),c=t("9d07"),m=t("b18a"),d=t("34a4"),h=t("3563"),u=t("a369"),b=t("c10a"),g=t("599d"),p=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("tr",["ru"===this.lang?t("td",[e._v(e._s(this.hall.name))]):t("td",[e._v(e._s(this.hall.nameUa))]),t("td",[e._v(e._s(this.hall.date))]),t("td",["ru"===this.$attrs.lang?t("router-link",{staticClass:"hall-btn btn-success",attrs:{tag:"button",to:{name:"hallEditRu",params:{id:this.hall.cinemaId,idHall:this.hall.id,hall:this.hall,cinema:this.cinema,lang:"ru"}}}},[e._v(" Ред ")]):t("router-link",{staticClass:"hall-btn btn-success",attrs:{tag:"button",to:{name:"hallEditUa",params:{id:this.hall.cinemaId,idHall:this.hall.id,hall:this.hall,cinema:this.cinema,lang:"ua"}}}},[e._v(" Ред ")])],1),t("td",[Object.keys(this.cinema.halls).length>1?t("button",{staticClass:"btn-danger",on:{click:function(a){return a.preventDefault(),e.$emit("showModal",e.hall)}}},[e._v(" Удал ")]):e._e()])])},f=[],v={props:["hall","cinema","lang"]},C=v,j=t("2877"),I=Object(j["a"])(C,p,f,!1,null,null,null),y=I.exports,_=t("2f62"),D={data:function(){return{loading:!0,showModal:!1,sending:!1,deleting:!1,disabled:!0,cinema:{},galleryDelete:[],hallDelete:{}}},components:{Loader:o["a"],LangEdit:r["a"],setName:d["a"],setDescription:h["a"],setMainImg:u["a"],setImgGallery:b["a"],setSEO:g["a"],hallTable:y,Toast:c["a"],modal:m["a"]},methods:Object(l["a"])(Object(l["a"])({},Object(_["c"])(["removeMainCinemaImg","pushCinemaMainImg","pushCinemaGalleryImg","removeCinemaImgGallery","removeHall"])),{},{showModalDelete:function(e){this.showModal=!0,this.hallDelete=e},pushName:function(e){this.cinema.name=e,this.disabled=!1},pushNameUa:function(e){this.cinema.nameUa=e,this.disabled=!1},pushDescription:function(e){this.cinema.description=e,this.disabled=!1},pushCircs:function(e){this.cinema.circs=e,this.disabled=!1},pushSEO:function(e){this.cinema.seo=e,this.disabled=!1},pushDescriptionUa:function(e){this.cinema.descriptionUa=e,this.disabled=!1},pushCircsUa:function(e){this.cinema.circsUa=e,this.disabled=!1},pushSEOUa:function(e){this.cinema.seoUa=e,this.disabled=!1},addImgCinemaGallery:function(e){this.cinema.gallery=e},sendCinemaData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,-1===e.allCinemas.findIndex((function(a){return a.id===e.cinema.id}))&&e.allCinemas.push(e.cinema),a.next=4,e.$store.dispatch("sendCinema",e.cinema);case 4:e.sending=!0,setTimeout((function(){e.sending=!1}),4e3),e.disabled=!0,a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:0!==e.galleryDelete.length&&(e.removeCinemaImgGallery(e.galleryDelete),e.galleryDelete=[]);case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},removeCinemaLogoImg:function(){this.cinema.imgLogoSRC="https://solovero.com/assets/camaleon_cms/image-not-found-4a963b95bf081c3ea02923dceaeb3f8085e1a654fc54840aac61a57a60903fef.png",this.disabled=!1},removeCinemaBannerImg:function(){this.cinema.imgBannerSRC="https://solovero.com/assets/camaleon_cms/image-not-found-4a963b95bf081c3ea02923dceaeb3f8085e1a654fc54840aac61a57a60903fef.png",this.disabled=!1},pushCinemaLogoImg:function(e){this.cinema.logoImg=e,this.cinema.imgLogoSRC=URL.createObjectURL(e),this.disabled=!1},pushCinemaBannerImg:function(e){this.cinema.bannerImg=e,this.cinema.imgBannerSRC=URL.createObjectURL(e),this.disabled=!1},pushGalleryCinemaImg:function(e){0===this.cinema.gallery.length?this.cinema.gallery.push({file:e.file,id:e.id}):this.cinema.gallery.splice(e.index,1,{file:e.file,id:e.id,cinemaId:e.objId,imgSRC:e.imgSRC}),this.disabled=!1},removeGalleryImg:function(e){var a=this.cinema.gallery.findIndex((function(a){return e.imgId===a.id}));this.galleryDelete.push(this.cinema.gallery.filter((function(a){return a.id===e.imgId}))[0]),this.cinema.gallery.splice(a,1),this.disabled=!1},deleteHall:function(e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return delete a.cinema.halls[e.id],t.next=3,a.removeHall(e);case 3:a.showModal=!1,a.deleting=!0,setTimeout((function(){a.deleting=!1}),4e3);case 6:case"end":return t.stop()}}),t)})))()}}),computed:Object(_["b"])(["allCinemas"]),mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$store.dispatch("fetchCinemas",e.allCinemas);case 2:return a.next=4,e.$store.getters.oneCinema(+e.$attrs.id)[0];case 4:if(e.cinema=a.sent,e.cinema||(e.cinema={id:+e.$attrs.id}),e.cinema.seo||(e.cinema.seo={}),e.cinema.seoUa||(e.cinema.seoUa={}),e.$attrs.allHalls&&(e.cinema.halls=e.$attrs.allHalls),!e.$attrs.cinema){a.next=13;break}return a.next=12,e.$attrs.cinema;case 12:e.cinema=a.sent;case 13:e.$attrs.hall&&(e.cinema.halls[e.$attrs.hall.id]=e.$attrs.hall),!1===e.$attrs.disabled&&(e.disabled=!1),e.cinema.halls||(e.cinema.halls={}),e.loading=!1;case 17:case"end":return a.stop()}}),a)})))()}},U=D,O=(t("c14f"),Object(j["a"])(U,i,n,!1,null,"e2bd4b7c",null));a["default"]=O.exports},b18a:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"modal-template"}},[t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"modal-mask"},[t("div",{staticClass:"modal-wrapper"},[t("div",{staticClass:"modal-container"},[t("div",{staticClass:"modal-header"},[e._t("header",(function(){return[e._v(" Удаление")]}))],2),t("div",{staticClass:"modal-body"},[e._t("body",(function(){return[e._v("Вы уверены что хотите удалить элемент?")]}))],2),t("div",{staticClass:"modal-footer"},[e._t("footer",(function(){return[t("button",{staticClass:"modal-default-button btn-danger",on:{click:function(a){return e.$emit("close")}}},[e._v(" Отмена ")]),t("button",{staticClass:"modal-default-button btn-success",on:{click:function(a){return e.$emit("delete",e.obj)}}},[e._v(" Ок ")])]}))],2)])])])])],1)},n=[],s={props:["obj"]},l=s,o=(t("132b"),t("2877")),r=Object(o["a"])(l,i,n,!1,null,"45b9ad64",null);a["a"]=r.exports},c14f:function(e,a,t){"use strict";t("db5d")},db5d:function(e,a,t){}}]);
//# sourceMappingURL=chunk-8f57535a.af4695a1.js.map