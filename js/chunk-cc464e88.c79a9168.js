(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc464e88"],{"4b3e":function(e,t,a){"use strict";a("5c01")},"5c01":function(e,t,a){},fa34:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loading?a("Loader"):a("div",[a("div",{staticClass:"page-edit__header"},[a("LangEdit",{attrs:{linkRu:"editPageRu",linkUa:"editPageUa"}}),a("div",{staticClass:"\n        custom-control\n        custom-switch\n        custom-switch-off-danger\n        custom-switch-on-success\n        page__switch\n      "},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"pageCheck"},domProps:{checked:this.page.status,checked:Array.isArray(e.status)?e._i(e.status,null)>-1:e.status},on:{change:[function(t){var a=e.status,s=t.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=e._i(a,n);s.checked?o<0&&(e.status=a.concat([n])):o>-1&&(e.status=a.slice(0,o).concat(a.slice(o+1)))}else e.status=i},e.pushStatus]}}),this.page.status?a("label",{staticClass:"custom-control-label",attrs:{for:"pageCheck"}},[e._v("ВКЛ")]):a("label",{staticClass:"custom-control-label",attrs:{for:"pageCheck"}},[e._v("ВЫКЛ")])])],1),a("form",{attrs:{id:"pageEdit",action:""}},[a("div",{staticClass:"pageEdit__input-wrap"},["ru"===this.$attrs.lang?a("setName",{attrs:{objName:this.page.name,name:"Название"},on:{"push-data":e.pushName}}):a("setName",{key:1,attrs:{objName:this.page.nameUa,name:"Назва"},on:{"push-data":e.pushNameUa}})],1),"ru"===this.$attrs.lang?a("setDescription",{attrs:{objDescription:this.page.description,description:"Описание"},on:{"push-data":e.pushDescription}}):a("setDescription",{key:2,attrs:{objDescription:this.page.descriptionUa,description:"Опис"},on:{"push-data":e.pushDescriptionUa}}),a("setMainImg",{attrs:{objMainImgText:"Главная картинка",objMainImg:this.page.imgSRC,id:"mainImg"},on:{"remove-main-obj-img":e.removePageImg,"push-main-obj-img":e.pushPageImg}}),a("setImgGallery",{attrs:{objId:+this.$attrs.id,objImgGallery:this.page.gallery},on:{"push-img-gallery":e.pushGalleryPageImg,"remove-img-gallery":e.removeGalleryImg,"add-img-gallery":e.addImgPageGallery}}),"ru"===this.$attrs.lang?a("setSEO",{attrs:{objSEOURL:this.page.seo.seoURL,objSEOTitle:this.page.seo.seoTitle,objSEOWords:this.page.seo.seoWords,objSEODescription:this.page.seo.seoDescription},on:{"push-data":e.pushSEO}}):a("setSEO",{attrs:{objSEOURL:this.page.seoUa.seoURL,objSEOTitle:this.page.seoUa.seoTitle,objSEOWords:this.page.seoUa.seoWords,objSEODescription:this.page.seoUa.seoDescription},on:{"push-data":e.pushSEOUa}}),a("div",{staticClass:"edit-buttons"},[a("button",{staticClass:"btn-success banner-up__btn",attrs:{type:"submit",form:"pageEdit",disabled:this.disabled},on:{click:function(t){return t.preventDefault(),e.sendPageData.apply(null,arguments)}}},[e._v(" Сохранить ")]),a("router-link",{staticClass:"btn-primary",attrs:{tag:"button",to:{name:"pages"}}},[e._v(" Вернуться ")])],1)],1),a("Toast",{attrs:{sending:this.sending,text:"Страница успешно сохранена"}})],1)},i=[],n=a("1da1"),o=a("5530"),r=(a("96cf"),a("b0c0"),a("a4d3"),a("e01a"),a("c740"),a("a434"),a("4de4"),a("99af"),a("0f79")),l=a("8628"),c=a("9d07"),g=a("34a4"),u=a("3563"),p=a("a369"),d=a("c10a"),h=a("599d"),m=a("2f62"),b={data:function(){return{loading:!0,sending:!1,disabled:!0,status:this.status,page:{},galleryDelete:[]}},components:{Loader:r["a"],Toast:c["a"],setName:g["a"],setDescription:u["a"],setMainImg:p["a"],setImgGallery:d["a"],setSEO:h["a"],LangEdit:l["a"]},methods:Object(o["a"])(Object(o["a"])({},Object(m["c"])(["pushPageMainImg","pushPageGalleryImg","removePageImgGallery"])),{},{pushStatus:function(){this.page.status=this.status,this.disabled=!1},pushName:function(e){this.page.name=e,this.disabled=!1},pushDescription:function(e){this.stock.description=e,this.disabled=!1},pushSEO:function(e){this.page.seo=e,this.disabled=!1},pushNameUa:function(e){this.page.nameUa=e,this.disabled=!1},pushDescriptionUa:function(e){this.stock.descriptionUa=e,this.disabled=!1},pushSEOUa:function(e){this.page.seoUa=e,this.disabled=!1},addImgPageGallery:function(e){this.page.gallery=e},sendPageData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,-1===e.allPages.findIndex((function(t){return t.id===e.page.id}))&&e.allPages.push(e.page),t.next=4,e.$store.dispatch("sendPage",e.page);case 4:e.sending=!0,setTimeout((function(){e.sending=!1}),4e3),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:0!==e.galleryDelete.length&&(e.removePageImgGallery(e.galleryDelete),e.galleryDelete=[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},removePageImg:function(){this.page.imgSRC="https://solovero.com/assets/camaleon_cms/image-not-found-4a963b95bf081c3ea02923dceaeb3f8085e1a654fc54840aac61a57a60903fef.png",this.disabled=!1},pushPageImg:function(e){this.page.mainImg=e,this.disabled=!1},pushGalleryPageImg:function(e){0===this.page.gallery.length?this.page.gallery.push({file:e.file,id:e.id}):this.page.gallery.splice(e.index,1,{file:e.file,id:e.id,pageId:e.objId}),this.disabled=!1},removeGalleryImg:function(e){var t=this.page.gallery.findIndex((function(t){return e.imgId===t.id}));this.galleryDelete.push(this.page.gallery.filter((function(t){return t.id===e.imgId}))[0]),this.page.gallery.splice(t,1),this.disabled=!1}}),computed:Object(m["b"])(["allPages"]),mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log((new Date).getTime()),t.next=3,e.$store.dispatch("fetchPages",e.allPages);case 3:return t.next=5,e.$store.getters.onePage(+e.$attrs.id)[0];case 5:a=t.sent,console.log("onePage: ",a),console.log((new Date).getTime()),e.page=a,e.page||(e.page={id:+e.$attrs.id,date:"".concat((new Date).getDate(),".").concat((new Date).getMonth()+1,".").concat((new Date).getFullYear()),status:!1,delete:!0}),e.page.seo||(e.page.seo={}),e.page.seoUa||(e.page.seoUa={}),e.status||(e.status=e.page.status),e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()}},f=b,y=(a("4b3e"),a("2877")),v=Object(y["a"])(f,s,i,!1,null,"27112d08",null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-cc464e88.c79a9168.js.map